version: 1
runtime: container
startCommand:
  type: stdio
build:
  dockerfile: "Dockerfile.smithery"
  dockerBuildPath: "."
metadata:
  name: "WhatsApp MCP"
  version: "2.0.0"
  description: "Complete WhatsApp integration with QR authentication support"
  author: "WhatsApp MCP Team"
  tags:
    - "whatsapp"
    - "messaging"
    - "communication"
    - "authentication"
    - "media"
configSchema:
  type: object
  properties:
    sessionTimeout:
      type: integer
      description: "Session timeout in days (default: 20)"
      default: 20
    qrTimeout:
      type: integer
      description: "QR code timeout in seconds (default: 180)"
      default: 180
    maxMessages:
      type: integer
      description: "Maximum messages to retrieve per query (default: 100)"
      default: 100
    enableMediaDownload:
      type: boolean
      description: "Enable automatic media download (default: true)"
      default: true
    logLevel:
      type: string
      description: "Logging level (debug, info, warn, error)"
      default: "info"
      enum: ["debug", "info", "warn", "error"]
    storageRetention:
      type: integer
      description: "Message retention period in days (0 = unlimited)"
      default: 0
  required: []
healthCheck:
  httpGet:
    path: "/api/qr"
    port: 8080
  intervalSeconds: 30
  timeoutSeconds: 10
  initialDelaySeconds: 60
  failureThreshold: 3
resources:
  requests:
    memory: "256Mi"
    cpu: "100m"
  limits:
    memory: "512Mi"
    cpu: "500m"
volumes:
  - name: "whatsapp-data"
    mountPath: "/app/store"
    description: "Persistent storage for WhatsApp session and messages"
environment:
  SMITHERY_ENV: "1"
  PYTHONUNBUFFERED: "1"
  WHATSAPP_API_URL: "http://localhost:8080/api"